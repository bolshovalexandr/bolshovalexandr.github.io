{"version":3,"sources":["webpack:///webpack/bootstrap b198490ae430571b82d7","webpack:///./src/js/main.js","webpack:///./src/js/tools/storage.js","webpack:///./src/js/markup/log.js","webpack:///./src/js/tools/xhr.js"],"names":["formLogin","document","querySelector","formLoginBtn","listLogin","listLog","listLogBody","profile","profileName","profileTime","profileDirectory","profileExit","unregisteredProfile","loader","hideFormShowProfile","classList","add","remove","cleanContainer","hideProfileShowForm","setUnregistered","logCardNodes","lastCall","Date","now","isBottomReached","getBoundingClientRect","bottom","window","innerHeight","onMouseScroll","evt","length","removeEventListener","setTimeout","splice","forEach","addCardToContainer","addEventListener","onSuccessAuthLoad","loadedData","data","nickname","lastLogin","directory","innerHTML","onErrorAuthLoad","onSuccessLogLoad","loadedLog","item","index","push","getElement","onErrorLogLoad","console","log","isSetFlag","appSettings","xhr","urlApi","url","body","token","successCode","preventDefault","FormData","action","append","reset","clean","sessionStorage","setItem","email","operator_id","getItem","operatorId","Object","values","some","removeItem","getLogTableRowMarkup","rowElements","getAdditionalImages","markup","hasMinusInComments","ha_comment","includes","ha_balance_act_id_fk","ha_naklad_id_fk","entries","map","join","ha_id","ha_time","toLocaleString","cardMarkupItem","insertAdjacentHTML","onSuccessLoad","onErrorLoad","timeout","XMLHttpRequest","responseType","open","send","response","status"],"mappings":"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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b198490ae430571b82d7","import auth from './tools/storage.js';\r\nimport log from './markup/log.js';\r\nimport xhr from './tools/xhr.js';\r\n\r\n\r\nconst formLogin = document.querySelector('#form-login');\r\nconst formLoginBtn = formLogin.querySelector('BUTTON');\r\nconst listLogin = document.querySelector('#list-login-list');\r\nconst listLog = document.querySelector('#list-log-list');\r\nconst listLogBody = document.querySelector('#log-body');\r\nconst profile = document.querySelector('#profile');\r\nconst profileName = profile.querySelector('#profile-name');\r\nconst profileTime = profile.querySelector('#profile-time');\r\nconst profileDirectory = profile.querySelector('#profile-directory');\r\nconst profileExit = document.querySelector('#profile-exit');\r\nconst unregisteredProfile = document.querySelector('#unregistered-profile');\r\nconst loader = document.querySelector('#loader');\r\n\r\n// спрятать форму, показать профиль\r\nconst hideFormShowProfile = function () {\r\n  formLogin.classList.add('d-none');\r\n  profile.classList.remove('d-none');\r\n  profileExit.classList.remove('d-none');\r\n  unregisteredProfile.classList.add('d-none');\r\n  log.cleanContainer();\r\n};\r\n\r\n// спрятать профиль, показать форму\r\nconst hideProfileShowForm = function () {\r\n  formLogin.classList.remove('d-none');\r\n  profile.classList.add('d-none');\r\n  profileExit.classList.add('d-none');\r\n  unregisteredProfile.classList.remove('d-none');\r\n  log.setUnregistered();\r\n};\r\n\r\n\r\n// \"ленивая отрисовка\" журнала\r\nconst logCardNodes = [];\r\nlet lastCall = Date.now();\r\n\r\nconst isBottomReached = () => listLogBody.getBoundingClientRect().bottom - window.innerHeight <= 150;\r\n\r\nconst onMouseScroll = (evt) => {\r\n  if (Date.now() - lastCall >= 100) {\r\n\r\n    if (isBottomReached() && logCardNodes.length > 0) {\r\n      window.removeEventListener('scroll', onMouseScroll);\r\n      loader.classList.remove('d-none');\r\n      window.setTimeout(function () {\r\n        logCardNodes.splice(0, 3).forEach(log.addCardToContainer);\r\n        window.addEventListener('scroll', onMouseScroll);\r\n        loader.classList.add('d-none');\r\n      }, 1500);\r\n    }\r\n\r\n    lastCall = Date.now();\r\n  }\r\n};\r\n\r\nwindow.addEventListener('scroll', onMouseScroll);\r\n\r\nconst onSuccessAuthLoad = (loadedData) => {\r\n  formLoginBtn.classList.remove('btn-danger');\r\n  auth.data = loadedData;\r\n  hideFormShowProfile();\r\n  let {nickname, lastLogin, directory} = auth.data;\r\n  profileName.innerHTML = nickname;\r\n  profileTime.innerHTML = lastLogin;\r\n  profileDirectory.innerHTML = directory;\r\n};\r\n\r\nconst onErrorAuthLoad = () => {\r\n  formLoginBtn.classList.add('btn-danger');\r\n};\r\n\r\nconst onSuccessLogLoad = (loadedLog) => {\r\n  loadedLog.forEach(function (item, index) {\r\n    logCardNodes.push(log.getElement(item));\r\n  });\r\n  logCardNodes.splice(0, 5).forEach(log.addCardToContainer);\r\n  window.addEventListener('scroll', onMouseScroll);\r\n};\r\n\r\nconst onErrorLogLoad = () => {\r\n  console.log('Somethig went arowng');\r\n};\r\n\r\n// слушаем кнопку \"Журнал\"\r\nlistLog.addEventListener('click', function () {\r\n  if (auth.isSetFlag) {\r\n    console.log(window.appSettings.xhr);\r\n    let {urlApi} = window.appSettings.xhr;\r\n\r\n    let url = `${urlApi}lopos_directory/${auth.data.directory}/update_log/${Date.now()}/story`;\r\n    let body = 'position=200&count=2000&token=' + auth.data.token;\r\n    const successCode = 281;\r\n\r\n    xhr(body, url, successCode, onSuccessLogLoad, onErrorLogLoad);\r\n  } else {\r\n    log.setUnregistered();\r\n  }\r\n});\r\n\r\n// слушаем сабмит отправки логина/пароля\r\nformLogin.addEventListener('submit', function (evt) {\r\n  evt.preventDefault();\r\n\r\n  let body = new FormData(formLogin);\r\n  let url = formLogin.action;\r\n  const successCode = 200;\r\n\r\n  body.append('deviceToken', '2222');\r\n\r\n  xhr(body, url, successCode, onSuccessAuthLoad, onErrorAuthLoad);\r\n});\r\n\r\n// слушаем кнопку \"Вход\"\r\nlistLogin.addEventListener('click', function () {\r\n  if (auth.isSetFlag) {\r\n    hideFormShowProfile();\r\n  } else {\r\n    hideProfileShowForm();\r\n  }\r\n});\r\n\r\n// слушаем кнопку \"Выход\"\r\nprofileExit.addEventListener('click', function () {\r\n  hideProfileShowForm();\r\n  formLogin.reset();\r\n  auth.clean();\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/main.js","export default {\r\n\r\n  // заполняем хранилище\r\n  set data(loadedData) {\r\n    sessionStorage.setItem('nickname', loadedData.nickname);\r\n    sessionStorage.setItem('lastLogin', loadedData.lastLogin);\r\n    sessionStorage.setItem('email', loadedData.email);\r\n    sessionStorage.setItem('directory', loadedData.directory);\r\n    sessionStorage.setItem('operatorId', loadedData.operator_id);\r\n    sessionStorage.setItem('token', loadedData.token);\r\n  },\r\n\r\n  // возвращаем данные\r\n  get data() {\r\n    return {\r\n      nickname: sessionStorage.getItem('nickname'),\r\n      lastLogin: sessionStorage.getItem('lastLogin'),\r\n      directory: sessionStorage.getItem('directory'),\r\n      email: sessionStorage.getItem('email'),\r\n      operatorId: sessionStorage.getItem('operatorId'),\r\n      token: sessionStorage.getItem('token'),\r\n    };\r\n  },\r\n\r\n  get isSetFlag() {\r\n    return Object.values(this.data).some((item) => item !== null);\r\n  },\r\n\r\n  // чистим хранилище\r\n  clean() {\r\n    sessionStorage.removeItem('nickname');\r\n    sessionStorage.removeItem('lastLogin');\r\n    sessionStorage.removeItem('directory');\r\n    sessionStorage.removeItem('email');\r\n    sessionStorage.removeItem('operatorId');\r\n    sessionStorage.removeItem('token');\r\n  }\r\n\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/tools/storage.js","const listLogBody = document.querySelector('#log-body');\r\n\r\nexport default {\r\n\r\n  cleanContainer() {\r\n    listLogBody.innerHTML = '';\r\n  },\r\n\r\n  setUnregistered() {\r\n    listLogBody.innerHTML = 'Пожалуйста, зарегистрируйтесь...';\r\n  },\r\n\r\n  getLogTableRowMarkup(rowElements) {\r\n    return (rowElements[1]) ? `<li class=\"list-group-item\"><b>${rowElements[0]}: </b>${rowElements[1]}</li>` : null;\r\n  },\r\n\r\n  getAdditionalImages(rowElements) {\r\n    let markup = '';\r\n\r\n    if (rowElements[0] === 'ha_kontr_agent_id_fk' && rowElements[1]) {\r\n      markup += '<img class=\"mr-3\" src=\"img/buyers.png\" width=\"50\" alt=\"Generic placeholder image\">';\r\n    }\r\n    if (rowElements[0] === 'ha_nomenclature_card_id_fk' && rowElements[1]) {\r\n      markup += '<img class=\"mr-3\" src=\"img/ic_my_nomenclature.png\" width=\"50\" alt=\"Generic placeholder image\">';\r\n    }\r\n    if (rowElements[0] === 'ha_group_good_id_fk' && rowElements[1]) {\r\n      markup += '<img class=\"mr-3\" src=\"img/groups.png\" width=\"50\" alt=\"Generic placeholder image\">';\r\n    }\r\n    if (rowElements[0] === 'ha_good_id_fk' || rowElements[0] === 'ha_price_id_fk' && rowElements[1]) {\r\n      markup += '<img class=\"mr-3\" src=\"img/goods.png\" width=\"50\" alt=\"Generic placeholder image\">';\r\n    }\r\n    if (rowElements[0] === 'ha_tag_id_fk' && rowElements[1]) {\r\n      markup += '<img class=\"mr-3\" src=\"img/ic_my_tag.png\" width=\"50\" alt=\"Generic placeholder image\">';\r\n    }\r\n    return markup;\r\n  },\r\n\r\n  getElement(item) {\r\n    let hasMinusInComments = item.ha_comment.includes('-') ? true : false;\r\n    let markup = '';\r\n\r\n    if (item.ha_balance_act_id_fk && hasMinusInComments) {\r\n      markup += '<img class=\"mr-3\" src=\"img/expenses.png\" width=\"50\" alt=\"Generic placeholder image\">';\r\n    } else if (item.ha_balance_act_id_fk && !hasMinusInComments) {\r\n      markup += '<img class=\"mr-3\" src=\"img/revenue.png\" width=\"50\" alt=\"Generic placeholder image\">';\r\n    }\r\n    if (item.ha_naklad_id_fk && hasMinusInComments) {\r\n      markup += '<img class=\"mr-3\" src=\"img/admission.png\" width=\"50\" alt=\"Generic placeholder image\">';\r\n    } else if (item.ha_naklad_id_fk && !hasMinusInComments) {\r\n      markup += '<img class=\"mr-3\" src=\"img/sale.png\" width=\"50\" alt=\"Generic placeholder image\">';\r\n    }\r\n\r\n    return `\r\n    <div class=\"media\">\r\n      <img class=\"mr-3\" src=\"img/user-male-filled-32.png\" width=\"50\" alt=\"Generic placeholder image\">\r\n      ${markup}\r\n      ${Object.entries(item).map(this.getAdditionalImages).join('')}\r\n      <div class=\"media-body\">\r\n        <h5 class=\"mt-0\">Создана накладная № ${item.ha_id}</h5>\r\n        ${item.ha_comment}\r\n        <span class=\"badge badge-info\">${new Date(+(item.ha_time + '000')).toLocaleString()}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"card m-2\" style=\"width: 100%;\"><ul class=\"list-group list-group-flush\">${Object.entries(item).map(this.getLogTableRowMarkup).join('')}</ul></div>\r\n    <hr><hr>`;\r\n  },\r\n\r\n  addCardToContainer(cardMarkupItem) {\r\n    listLogBody.insertAdjacentHTML('beforeend', cardMarkupItem);\r\n  },\r\n\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/markup/log.js","export default (body, url, successCode, onSuccessLoad, onErrorLoad) => {\r\n\r\n  let {timeout} = window.appSettings.xhr;\r\n  let xhr = new XMLHttpRequest();\r\n  xhr.timeout = timeout;\r\n  xhr.responseType = 'json';\r\n  xhr.open('POST', url, true);\r\n  xhr.send(body);\r\n\r\n  xhr.addEventListener('load', function () {\r\n    if (xhr.response.status === successCode) {\r\n      onSuccessLoad(xhr.response.data);\r\n    } else {\r\n      onErrorLoad();\r\n    }\r\n  });\r\n\r\n  xhr.addEventListener('error', onErrorLoad);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/tools/xhr.js"],"sourceRoot":""}